notifications:
  email:
    on_success: never
env:
  global:
    - secure: KSPgLE9IBYnO0nny3aS9v0aryYd9LHLFnX+EvOlkykByzwrbSV761XjNQIAn7rRyHi0q5RKGuMs091yHMqzPwmXKJthkdsKs+tke9XSQS38lbLSk4eCc06dKlXkIIt9/1Xvk664d4og9cmNFYQxVywRWq7IJB/pJfKOFVPSbHm0=
    - secure: mmdIsrkD8xvc4oiwDaZlfFVRK8KR2fmUpTBoTZiLIBmPgVcUT4EZjUuevxXxFuC6K2MwxkJIMrQt488Q6uxZvJXVVfE2IaDq5xy8lcyUYR6xZD6P/X34IuJhaum6ZByfGGZeRDq16JoK6sZwifZ3j+ZpQ7CCWV/kH4zoEAWnLjE=
before_install:
  - wget http://static.rust-lang.org/dist/rust-nightly-x86_64-unknown-linux-gnu.tar.gz
  - tar xf rust-nightly-x86_64-unknown-linux-gnu.tar.gz
  - wget http://static.rust-lang.org/cargo-dist/cargo-nightly-x86_64-unknown-linux-gnu.tar.gz
  - tar xf cargo-nightly-x86_64-unknown-linux-gnu.tar.gz
install:
  - sudo ./rust-nightly-x86_64-unknown-linux-gnu/install.sh
  - sudo ./cargo-nightly-x86_64-unknown-linux-gnu/install.sh
script:
  - cd examples
  - cargo build
  - cd ..
  - mkdir build
  - cd build
  - cmake .. -DCMAKE_INSTALL_PREFIX=/tmp
  - make -j
  - make test
  - make doc -j
  - cd examples
  - ./example
after_success:
  - cd ..
  - curl http://www.rust-ci.org/artifacts/put?t=$RUSTCI_TOKEN | sh
  - ../doc/gh_pages_upload.sh
